function getFormattedDateTimeUtility(){const n=new Date,t=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getFullYear()).slice(-2),u=String(n.getHours()).padStart(2,"0"),f=String(n.getMinutes()).padStart(2,"0"),e=String(n.getSeconds()).padStart(2,"0");return`${t}${i}${r} ${u}:${f}:${e}`}function getCookieUtility(n){const t=`; ${document.cookie}`;trackLogEvent({log:`document.cookie: ${t}`});const i=t.split(`; ${n}=`);return i.length===2?(trackLogEvent({log:`cookie ${n}: ${t}`}),i.pop().split(";").shift()):null}function selectInitUtility(n){n&&(selectResetElementUtility(n),selectFirstOptionUtility(n))}function selectResetElementUtility(n){if(n){let t=n.querySelector("option:first-child");t||(t=document.createElement("option"),t.value="",t.textContent="-- Chọn --");n.innerHTML="";n.appendChild(t)}}function selectFirstOptionUtility(n){!n&&n.options.length>1&&(n.selectedIndex=1)}function trackLogEvent({log:i,error:n,fatal:t}){window.GLOBAL_ISSHOW_LOGS&&i&&console.log(i);window.GLOBAL_ISSHOW_ERRORS&&n&&console.error(n);window.GLOBAL_ISSHOW_DEBUGS&&t&&console.fatal(t)}async function fetchCoreStateOrProvinces(n=0){const t=`/api/client-address/countries/${n}/states-provinces`;return await fetchApiClient(t)}async function fetchCoreDistricts(n=0){const t=`api/client-address/states-provinces/${n}/districts`;return await fetchApiClient(t)}function trackItemClick(n,t){document.querySelectorAll(n).forEach(n=>{n.addEventListener("click",async function(){const n=parseFloat(this.getAttribute("data-id"));n>0&&await sendTrackingData(t,n)})})}async function sendTrackingData(n,t){try{const i=await fetchApiClient(`${n}${t}`);console.log("Request successful:",i)}catch(i){console.error("Request failed:",i)}}function trackMenuClick(){trackItemClick(".v-menu-item a",API_URLS.MENU)}function trackBannerClick(){trackItemClick(".banner-item a",API_URLS.BANNER)}function trackProductClick(){trackItemClick(".product-item a",API_URLS.PRODUCT)}async function trackPageProductClick(){const n=document.getElementById("id");if(n){const t=parseFloat(n.value);t>0&&await sendTrackingData(API_URLS.PRODUCT,t)}}window.GLOBAL_ISIPCOMPANYORLOCAL=!1;window.GLOBAL_ISSHOW_LOGS=!0;window.GLOBAL_ISSHOW_ERRORS=!1;window.GLOBAL_ISSHOW_DEBUGS=!1;window.GLOBAL_ISREPORT=!1,function(){async function n(){const n=await fetchApiClient("/api/client-core/getsettings",{skipAuth:!0});if(n){const t=n.IsIpCompanyOrLocal,i=n.IsShowLogs,r=n.IsShowErrors,u=n.IsShowDebugs,f=n.IsReport;window.GLOBAL_ISIPCOMPANYORLOCAL=t;window.GLOBAL_ISSHOW_LOGS=i;window.GLOBAL_ISSHOW_ERRORS=r;window.GLOBAL_ISSHOW_DEBUGS=u;window.GLOBAL_ISREPORT=f;trackLogEvent({log:`syncConfigSettings: ${JSON.stringify(n)}`})}}window.syncConfigSettings=n;document.addEventListener("DOMContentLoaded",()=>n())}(),function(){function u(n,t){let i;return function(...r){clearTimeout(i);i=setTimeout(()=>n.apply(this,r),t)}}function f(){i>2&&(trackLogEvent({log:"Page focus or visible already detected, skipping action."}),document.removeEventListener("focus",()=>t("Page focused")),document.removeEventListener("focusin",()=>t("Page focusined")),document.removeEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&t("Page is visible")}))}function e(){r>99&&(trackLogEvent({log:"User interaction already detected, skipping action."}),document.removeEventListener("mousemove",()=>n("Mouse movement")),document.removeEventListener("mousedown",()=>n("Mouse click")),document.removeEventListener("keydown",()=>n("Key press")),document.removeEventListener("scroll",()=>n("Scroll")),document.removeEventListener("touchmove",()=>n("Touch movement")),document.removeEventListener("touchstart",()=>n("Touch start")),document.removeEventListener("touchend",()=>n("Touch end")))}let i=0,r=0;const t=u(function(n){f();n==="Page focused"||n==="Page focusined"||n==="Page is visible"?(i+=1,trackLogEvent({log:`Page focus or visible detected: ${n}`})):n==="Page is hidden"&&(i-=1,trackLogEvent({log:`Page focus or visible detected: ${n}`}))},99),n=u(function(n){e();r+=1;trackLogEvent({log:`User interaction detected: ${n}`})},99);document.addEventListener("focus",()=>t("Page focused"));document.addEventListener("focusin",()=>t("Page focusined"));document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&t("Page is visible")});document.addEventListener("DOMContentLoaded",function(){document.visibilityState==="visible"&&t("Page is visible")});document.addEventListener("mousemove",()=>n("Mouse movement"));document.addEventListener("mousedown",()=>n("Mouse click"));document.addEventListener("keydown",()=>n("Key press"));document.addEventListener("scroll",()=>n("Scroll"));document.addEventListener("touchmove",()=>n("Touch movement"));document.addEventListener("touchstart",()=>n("Touch start"));document.addEventListener("touchend",()=>n("Touch end"));window.globalCountUserInteracted=function(){return r};window.globalCountPageFocused=function(){return i};window.globalIsAuthenticatedUser=function(){return globalCountUserInteracted()>2&&globalCountPageFocused()>0}}(),function(){function t(){return getCookieUtility("XSRF-TOKEN")}async function n(n,{t={},skipAuth:i}={}){const r=await globalGetXsrfTokenApiClient();trackLogEvent({log:`getXsrfTokenApiClient: ${r}`});t.headers=t.headers||{};t.headers["X-Requested-With"]="XMLHttpRequest";r&&(t.headers["X-XSRF-Token"]=r);t.method=t.method||"POST";trackLogEvent({log:`fetch Options: ${JSON.stringify(t)}`});t.method&&["POST","PUT","PATCH"].includes(t.method.toUpperCase())&&t.body&&(typeof t.body=="string"&&t.body.startsWith("{")?t.headers["Content-Type"]="application/json":typeof t.body=="object"&&(t.body=JSON.stringify(t.body),t.headers["Content-Type"]="application/json"));try{trackLogEvent({log:`fetch: ${n}, skipAuth:${i}, bDateTime:${getFormattedDateTimeUtility()}`});const f=i?!0:!0;if(!f)return null;const r=await fetch(n,t);r.ok||trackLogEvent({fatal:`HTTP error! status: ${r.status}`});trackLogEvent({log:`fetch: ${n}, skipAuth:${i}, aDateTime:${getFormattedDateTimeUtility()}`});contentType=r.headers.get("Content-Type");trackLogEvent({log:`fetch response: ${contentType}`});let u=null;return contentType.includes("application/json")?u=await r.json():contentType.includes("text/html")||contentType.includes("text/plain")?u=await r.text():contentType.includes("application/octet-stream")?u=await r.blob():(contentType.includes("application/pdf")||contentType.includes("image/"))&&(u=await r.arrayBuffer()),trackLogEvent({log:`fetch response: ${r.headers.get("Content-Type")}, resultData: ${u}`}),u}catch(u){return trackLogEvent({fatal:`fetch catch: ${u}`}),null}}window.globalGetXsrfTokenApiClient=t;window.fetchWithXsrfTokenApiClient=n;window.fetchApiClient=n}();const API_URLS={MENU:"/api/view-menu/",BANNER:"/api/view-banner/",PRODUCT:"/api/view-product/"};